function res_openMiniEdit(a,b){null==b&&(b="myWindow"),w=window.open(a,b,"resizable=on, scrollbars=yes")}function res_submitParent(){var b=$("#formUpdateInfo");b.length?(b.find("#lnk_editDesig").text("Updating..."),getWidget($("#formUpdateInfo"),customiseAjaxPath,"")):(null==a?c.document.myform.rethrowTextCv.value=1:c.document.myform.doNotShowErrors.value=1,c.document.myform.submit())}function preventSSAReturn(a){"inpEmail"==(a.target||a.srcElement).id&&13==a.keyCode}$(window).on("load",function(){isLoggedIn&&$("#inlineEditWidget").length&&getWidget($("#formUpdateInfo"),customiseAjaxPath,"")});var getWidget=function(a,b,c){"use strict";function d(a,b){""==b&&(b="select"),a.val(b).find("option[value="+b+"]").attr("selected",!0),a.trigger("change")}function e(a){var b=!1,c=!1,d=/^[0-9-+]+$/;return a.each(function(){var a=this;if(""==a.value||d.test(a.value)||(c=!0),""==a.value&&$(a).is(".number")){var e=a.name,f="m"==e.charAt(0)?"p"+e.substr(1):"m"+e.substr(1);for(i=0;i<l.length;++i)f==l[i].name&&""==l[i].value&&(b=!0)}}),c?0:b?1:($(a[0]).parents(".updateInfo").hide().before("<p class='tempInfo'>"+a[0].value+"+"+a[1].value+"+"+a[2].value+"</p>"),3)}function f(a){var b=!1;return a.each(function(){$(this).attr("name")==q[0]&&"select"==this.value&&(b=!0)}),b?2:"30plus"==a[0].value?($(a[0]).parents(".updateInfo").hide().before("<p class='tempInfo'>30+ Years"),3):($(a[0]).parents(".updateInfo").hide().before("<p class='tempInfo'>"+a[0].value+"Year(s)"+a[1].value+"+Mont...</p>"),3)}function g(a,c){var d=r[a.parents(".inlineUpdate").find("label").text()],e=$("#orig_"+d+"_initial"),f="",g="";e.length&&(g="&"+d+"_initial="+encodeURIComponent(e.val())),a.is(".contact")?f=c[0].value+"+"+c[1].value+"+"+c[2].value:"select"==c[1].value?(c[1].value=0,f=c[0].value+"."+c[1].value):f="30plus"==c[0].value?c[0].value+".":c[0].value+"."+c[1].value;var i=10*Math.random();$.ajax({type:"get",async:"true",data:"conmnj="+$("#conmnj").val()+"&"+d+"="+encodeURIComponent(f)+g+"&crosssrc="+$("#crosssrc").val()+"&rand="+i,url:b+"/ni/nimnj/mnj_saveInlineDetails.php"}).done(function(b){h(a,c,b),e.length&&e.val(f)}).fail(function(){a.parent("p").show().find(".err").text(n.err_default).show()}).always(function(){$(a).parents(".updateInfo").siblings(".tempInfo").remove()})}function h(a,b,c){try{var d="\n"==c.charAt(0)?c.substr(1).split("|X|"):c.split("|X|");if("OK"==d[0]){var e=[],f="";if(a.parent("p").find(".err").text("").hide(),a.is(".contact")){for(i=0;i<b.length;++i)e[i]=b[i].value.replace(/[-+\s]/g,""),f+=e[i]+"+";f=v(f,"+"),""==e[2]?(e[0]=e[1]="",b[2].name==o[2]?a.parent("p").hide().siblings("p.savedInfo").show().children("em").text("Not Mentioned ").addClass("noData"):a.parent("p").hide().siblings("p.addPhone").show().siblings("p.savedInfo").children("em").text("")):a.parent("p").hide().siblings("p.savedInfo").show().children("em").text(f+" ").removeClass("noData")}else{var g,f=d[1].split(".");g="30plus"==f[0]?"30+ Years":f[0]+" Year(s) "+f[1]+" month(s)",e=f,a.parent("p").hide().siblings("p.savedInfo").show().children("em").text(g+" ")}k(b,e),j(a.parent(".updateInfo")),m.find(".lastUpdate").text("Last modified : "+d[2])}else a.parent("p").show().find(".err").html(d[1]).show()}catch(h){}}function j(a){a.find("input , select").each(function(a){for(i=0;i<l.length;++i)this.name===l[i].name&&("text"===this.type?(this.value=l[i].value,$(this).val(l[i].value).trigger("focus")):d($(this),l[i].value))})}function k(a,b){for(var c=0;c<a.length;++c)for(var d=0;d<l.length;++d)a[c].name==l[d].name&&(l[d].value=b[c])}var l,m=$("#inlineEditWidget"),n={err_valid:"Please specify a valid telephone number",err_req:"Please specify at least one phone number",err_exp:"Please specify a valid Experience",err_default:"There seems to be some problem updating this information. Please refresh the page and try again"},o=["mCountryCode","mAreaCode","mNumber"],p=["pCountryCode","pAreaCode","pNumber"],q=["selYear","selMonths"],r={"Mobile Number":"mob","Telephone Number":"landline","Work Experience":"exp"},s=10*Math.random(),t=a._ispartner&&a._ispartner.value?a._ispartner.value:0;m.on("change","select[name="+q[0]+"]",function(){"30plus"==this.value?(d($("select[name="+q[1]+"]"),"select"),$("select[name="+q[1]+"]").prop("disabled","disabled")):$("select[name="+q[1]+"]").prop("disabled",!1)}).on("click","#lnk_editDesig",function(){}),$.ajax({type:"post",async:"true",data:"conmnj="+$("#conmnj").value+"&type=1&source="+c+"&rand="+s+"&_ispartner="+t,url:b+"/ni/nimnj/mnj_getWidgetHtml.php"}).done(function(a){var b=a.split("|xXX|");m.html(b[1]).show();for(var c=$("#orig_mob").val(),e=$("#orig_landline").val(),f=$("#orig_exp").val(),g=0;g<o.length;g++)$("input[name="+o[g]+"]").val(c.split("+")[g]),$("input[name="+p[g]+"]").val(e.split("+")[g]);d($("select[name="+q[0]+"]"),f.split(".")[0]),"30plus"==f.split(".")[0]?$("select[name="+q[1]+"]").prop("disabled","disabled"):d($("select[name="+q[1]+"]"),f.split(".")[1]),l=$("#formUpdateInfo").serializeArray(),supportPlaceholder(),m.show()}),m.on("click","a.lnkEdit",function(){$(this).parent().hide().siblings(".updateInfo").show()}).on("click","a.btnCancel",function(){var a=$(this);return j(a.parent(".updateInfo")),a.siblings().find("input[name="+p[2]+"]").length&&""==l[5].value?void a.siblings(".err").text("").hide().parents(".updateInfo").hide().siblings(".addPhone").show():void a.siblings(".err").text("").hide().parents(".updateInfo").hide().siblings(".savedInfo").show()}).on("click","a.btnSave",function(){var a=$(this),b=a.parent("p").find(".err");b.text("").hide();var c,d;switch(d=a.parent("p").find("input[type=text],select"),c=a.is(".contact")?e(d):f(d)){case 0:b.text(n.err_valid).show();break;case 1:b.text(n.err_req).show();break;case 2:b.text(n.err_exp).show();break;case 3:g(a,d);break;default:b.text(n.err_default).show()}});var u=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},v=function(a,b){b=u(b);var c=new RegExp("^["+b+"]+|["+b+"]+$","g");return a.replace(c,"").replace("++","+")};$(".updateInfo input[type=text]").on("blur",function(){$(this).val(function(){return $.trim(this.value)})})};